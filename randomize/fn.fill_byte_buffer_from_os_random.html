<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Fills a byte buffer with random bytes from an OS-specific source."><meta name="keywords" content="rust, rustlang, rust-lang, fill_byte_buffer_from_os_random"><title>randomize::fill_byte_buffer_from_os_random - Rust</title><link rel="stylesheet" type="text/css" href="../normalize.css"><link rel="stylesheet" type="text/css" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" type="text/css" href="../light.css"  id="themeStyle"><link rel="stylesheet" type="text/css" href="../dark.css" disabled ><link rel="stylesheet" type="text/css" href="../ayu.css" disabled ><script id="default-settings"></script><script src="../storage.js"></script><script src="../crates.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="icon" type="image/svg+xml" href="../favicon.svg">
<link rel="alternate icon" type="image/png" href="../favicon-16x16.png">
<link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><style type="text/css">#crate-search{background-image:url("../down-arrow.svg");}</style></head><body class="rustdoc fn"><!--[if lte IE 8]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="sidebar"><div class="sidebar-menu" role="button">&#9776;</div><a href='../randomize/index.html'><div class='logo-container rust-logo'><img src='../rust-logo.png' alt='logo'></div></a><div class="sidebar-elems"><p class="location"><a href="index.html">randomize</a></p><div id="sidebar-vars" data-name="fill_byte_buffer_from_os_random" data-ty="fn" data-relpath=""></div><script defer src="sidebar-items.js"></script></div></nav><div class="theme-picker"><button id="theme-picker" aria-label="Pick another theme!" aria-haspopup="menu"><img src="../brush.svg" width="18" height="18" alt="Pick another theme!"></button><div id="theme-choices" role="menu"></div></div><script src="../theme.js"></script><nav class="sub"><form class="search-form"><div class="search-container"><div><select id="crate-search"><option value="All crates">All crates</option></select><input class="search-input" name="search" disabled autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"></div><button type="button" class="help-button">?</button>
                <a id="settings-menu" href="../settings.html"><img src="../wheel.svg" width="18" height="18" alt="Change settings"></a></div></form></nav><section id="main" class="content"><h1 class="fqn"><span class="in-band">Function <a href="index.html">randomize</a>::<wbr><a class="fn" href="">fill_byte_buffer_from_os_random</a></span><span class="out-of-band"><span id="render-detail"><a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span><a class="srclink" href="../src/randomize/os_random.rs.html#41-121" title="goto source code">[src]</a></span></h1><pre class="rust fn">pub fn fill_byte_buffer_from_os_random(buf: &amp;mut [u8]) -&gt; <a class="enum" href="https://doc.rust-lang.org/nightly/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;(), u32&gt;</pre><div class="docblock"><p>Fills a byte buffer with random bytes from an OS-specific source.</p>
<p>This is intended for use in obtaining small seed slices (&lt;=64 bytes) to
initialize a PRNG with. Despite that intent, you <em>can</em> attempt to fill a
buffer of any size. The function will automatically chunk up the buffer
appropriately so that each individual randomness request to the OS doesn’t
overwhelm the OS call.</p>
<p>It’s possible that the OS randomness call can fail. In this case, the
function will automatically attempt to retry up to 10 times. If failure
persists, then this function will give up and pass the <code>Err</code> back to you.
When this happens, some unknown amount of the buffer <em>might</em> have been
filled with randomness before things broke.</p>
<h4 id="the-os-call-used-varies-by-target" class="section-header"><a href="#the-os-call-used-varies-by-target">The OS Call Used Varies By Target</a></h4>
<ul>
<li><strong>Windows:</strong> <a href="https://docs.microsoft.com/en-us/windows/win32/api/bcrypt/nf-bcrypt-bcryptgenrandom">BCryptGenRandom</a>. On failure, the <code>Err</code> holds the
<code>GetLastError</code> value.</li>
<li><strong>Unix:</strong> <a href="https://man7.org/linux/man-pages/man2/getrandom.2.html">getrandom</a>. On failure, the <code>Err</code> value will be <code>u32::MAX</code>.</li>
<li><strong>Other:</strong> This function will <strong>fail to link</strong> if you don’t have either
<code>windows</code> or <code>unix</code> configured.</li>
</ul>
<p>Because cargo does not handle target-conditional features very well, this
function always exists as long as the <code>os_random</code> crate feature is enabled.
However, if you do actually call this function when building for a target
other than <code>windows</code> or <code>unix</code> (including MacOS), then you’ll get a linker
error.</p>
<p>In other words, you can safely leave the <code>os_random</code> feature on all the time
and still build the crate anywhere, as long as you don’t <em>actually</em> call
this function outside of <code>windows</code> or <code>unix</code>.</p>
</div></section><section id="search" class="content hidden"></section><section class="footer"></section><div id="rustdoc-vars" data-root-path="../" data-current-crate="randomize" data-search-js="../search-index.js"></div>
    <script src="../main.js"></script></body></html>